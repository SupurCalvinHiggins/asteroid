
load "io".

structure Dog with

  data name.
  data tricks.

  function add_trick
    with (self, new_trick) do
      let self @tricks = self @tricks + [new_trick].
    end

  function __init__
    with (self, name) do
      let self @name = name.
      let self @tricks = [].
    end

  end -- structure

-- Fido the dog
let fido = Dog("Fido").
fido @add_trick("roll over").
fido @add_trick("play dead").

-- Buddy the dog
let buddy = Dog("Buddy").
buddy @add_trick("roll over").
buddy @add_trick("sit stay").

-- Fifi the dog
let fifi = Dog("Fifi").
fifi @add_trick("sit stay").

-- print out all the names of dogs
-- whose first trick is 'roll over'.
let dogs = [fido, buddy, fifi].

for Dog(name, ["roll over"|_]) in dogs do
    println (name + " does roll over").
end
